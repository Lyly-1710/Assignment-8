<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="main">
    <form action="" method="POST" class="form" id="form-1">
      <h3 class="heading">Form đăng ký</h3>
      <div class="spacer"></div>
      <div class="form-group">
        <label for="fullname" class="form-label">Tên đầy đủ</label>
        <input id="fullname" name="fullname" type="text" placeholder="VD: Sơn Đặng" class="form-control">
        <span class="form-message"></span>
      </div>
      <button class="form-submit" onclick="validateForm()">Đăng ký</button>
    </form>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      Validator({
        form: '#form-1',
        formGroupSelector: '.form-group',
        errorSelector: '.form-message',
        rules: [
          Validator.isRequired('#fullname', 'Vui lòng nhập tên đầy đủ của bạn')
        ],
        onSubmit: function (data) {
          alert("Đăng ký thành công");

          // Ngăn chặn chuyển hướng mặc định của biểu mẫu
          return false;
        }
      });
    });

    function validateForm() {
      var formElement = document.querySelector('#form-1');
      var isFormValid = true;

      // Đặt màu border-color về trạng thái ban đầu cho tất cả các input
      formElement.querySelectorAll('[name]').forEach(function (input) {
        input.style.borderColor = '';
      });

      options.rules.forEach(function (rule) {
        var inputElement = formElement.querySelector(rule.selector);
        var isValid = validate(inputElement, rule);
        
        if (!isValid) {
          isFormValid = false;
          // Hiển thị border-color đỏ cho input không hợp lệ
          inputElement.style.borderColor = 'red';
        }
      });

      if (isFormValid) {
        // Trường hợp submit với javascript
        if (typeof options.onSubmit === 'function') {
          var enableInputs = formElement.querySelectorAll('[name]');
          var formValues = Array.from(enableInputs).reduce(function (values, input) {
            switch(input.type) {
              case 'radio':
                values[input.name] = formElement.querySelector('input[name="' + input.name + '"]:checked').value;
                break;
              case 'checkbox':
                if (!input.matches(':checked')) {
                  values[input.name] = '';
                  return values;
                }
                if (!Array.isArray(values[input.name])) {
                  values[input.name] = [];
                }
                values[input.name].push(input.value);
                break;
              case 'file':
                values[input.name] = input.files;
                break;
              default:
                values[input.name] = input.value;
            }
            return values;
          }, {});
          options.onSubmit(formValues);

          // Ngăn chặn chuyển hướng mặc định của biểu mẫu
          return false;
        } else {
          // Trường hợp submit với hành vi mặc định
          formElement.submit();
        }
      }

      // Ngăn chặn chuyển hướng mặc định của biểu mẫu nếu có lỗi
      return false;
    }
  </script>
  <script src="E:\Day 8\main.js"></script>
</body>
</html>
